<div class="contener-view">

<div class="titlePage">Liste des demandeurs d'emploi</div>

<!-- Barre de recherche -->
<mat-form-field appearance="outline" style="width: 100%; margin-bottom: 16px;">
  <mat-label>Recherche</mat-label>
  <input matInput (keyup)="applyFilter($event)" placeholder="Rechercher un demandeur...">
</mat-form-field>


<!--Tableau des demandeurs d'emploi-->

<table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>

      <!-- Colonne Sélection -->
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox (change)="masterToggle()" [checked]="isAllSelected()" [indeterminate]="isSomeSelected()"></mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox
          (click)="$event.stopPropagation()" 
          (change)="toggleSelection(row)"
          [checked]="selection.has(row)"></mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="gender">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Civilité</th>
        <td mat-cell *matCellDef="let element">{{ element.gender }}</td>
      </ng-container>

      <!-- Nom -->
      <ng-container matColumnDef="nom">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nom</th>
        <td mat-cell *matCellDef="let element">{{ element.nom }}</td>
      </ng-container>

      <!-- Prénom -->
      <ng-container matColumnDef="prenom">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Prénom</th>
        <td mat-cell *matCellDef="let element">{{ element.prenom }}</td>
      </ng-container>

      <!-- Téléphone
      <ng-container matColumnDef="tel">
        <th mat-header-cell *matHeaderCellDef>Téléphone</th>
        <td mat-cell *matCellDef="let element">{{ element.tel }}</td>
      </ng-container>
       -->
      <ng-container matColumnDef="qpv">
        <th mat-header-cell *matHeaderCellDef>QPV</th>
        <td mat-cell *matCellDef="let element">{{ element.qpv }}</td>
      </ng-container>

      <!-- Adresse 
      <ng-container matColumnDef="adresse">
        <th mat-header-cell *matHeaderCellDef>Adresse</th>
        <td mat-cell *matCellDef="let element">{{ element.adresse }}</td>
      </ng-container>-->

       <ng-container matColumnDef="activity">
        <th mat-header-cell *matHeaderCellDef>Secteur d'activité</th>
        <td mat-cell *matCellDef="let element">{{ element.activity }}</td>
      </ng-container>


      <!-- Date dernier RDV -->
      <ng-container matColumnDef="dernierRdv">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Date dernier RDV</th>
        <td mat-cell *matCellDef="let element">{{ element.dernierRdv | date }}</td>
      </ng-container>

      <ng-container matColumnDef="licence">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Permis de conduire</th>
        <td mat-cell *matCellDef="let element">{{ element.licence }}</td>
      </ng-container>

      <!-- Date prochain RDV 
      <ng-container matColumnDef="prochainRdv">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Date prochain RDV</th>
        <td mat-cell *matCellDef="let element">{{ element.prochainRdv | date }}</td>
      </ng-container>-->

    <!-- Statut -->
    <ng-container matColumnDef="statut">
      <th mat-header-cell *matHeaderCellDef>Statut</th>
      <td mat-cell *matCellDef="let element">
        <span
          class="badge-status"
          [ngClass]="{
            'badge-status--1': element.statut === 'Sans emploi',
            'badge-status--2': element.statut === 'Retour emploi',
            'badge-status--3': element.statut === 'Nouveau'
          }"
        >
          {{ element.statut }}
        </span>
      </td>
    </ng-container>

    <!-- Action -->
    <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Modifier</th>
        <td mat-cell *matCellDef="let element">
          <button mat-icon-button color="primary" (click)="openEdit(element)">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
    </ng-container>

      <!-- Header et Rows -->
      <tr mat-header-row  *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row  *matRowDef="let row; columns: displayedColumns;"  (click)="toggleSelection(row)" style = "cursor:pointer; "> </tr>


</table>
</div>
